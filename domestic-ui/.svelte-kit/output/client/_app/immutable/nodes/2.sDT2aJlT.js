import"../chunks/Bzak7iHL.js";import{o as ne}from"../chunks/Dy4lNLHC.js";import{V as _e,N as J,aD as Ue,X as Re,O as Ve,M as We,z as l,B as De,R as Ye,T as ze,U as Pe,W as he,a2 as ce,aE as Xe,aF as Ke,Y as ke,$ as Ze,Z as ie,aG as Me,i as Qe,a4 as et,aH as Oe,aI as tt,a0 as Ce,a1 as at,aJ as rt,aK as be,aL as Le,aM as st,aN as lt,aO as it,aP as ot,aQ as nt,aR as ut,F as ct,aS as vt,aT as dt,aU as ft,aV as pt,aW as mt,aX as gt,aY as _t,aZ as ht,e as ve,v as bt,a_ as yt,a$ as z,ae as B,af as A,ak as v,al as c,ap as H,aB as Te,aq as q,ai as j,aj as F,u as te,aA as R,D as T,am as x,b0 as oe,an as je,ao as ee,ag as U,t as xt,b1 as de}from"../chunks/CwpXA0xo.js";import{a as re,s as se,i as L,b as He}from"../chunks/C2gQ6rq2.js";import{s as P,t as G,a as X,f as $e}from"../chunks/C_2Bn_MU.js";import{i as Ie}from"../chunks/Bqi8HEHg.js";import{p as Be,b as wt}from"../chunks/z1heT4le.js";function kt(a,t){return t}function $t(a,t,e){for(var s=a.items,r=[],o=t.length,i=0;i<o;i++)ot(t[i].e,r,!0);var d=o>0&&r.length===0&&e!==null;if(d){var m=e.parentNode;nt(m),m.append(e),s.clear(),W(a,t[0].prev,t[o-1].next)}ut(r,()=>{for(var u=0;u<o;u++){var _=t[u];d||(s.delete(_.k),W(a,_.prev,_.next)),Le(_.e,!d)}})}function St(a,t,e,s,r,o=null){var i=a,d={flags:t,items:new Map,first:null};{var m=a;i=J?_e(Ue(m)):m.appendChild(Re())}J&&Ve();var u=null,_=!1,y=new Map,p=De(()=>{var g=e();return Qe(g)?g:g==null?[]:Me(g)}),b,n;function h(){Tt(n,b,d,y,i,r,t,s,e),o!==null&&(b.length===0?u?Ce(u):u=ke(()=>o(i)):u!==null&&at(u,()=>{u=null}))}We(()=>{n??(n=ct),b=l(p);var g=b.length;if(_&&g===0)return;_=g===0;let I=!1;if(J){var O=Ye(i)===ze;O!==(g===0)&&(i=Pe(),_e(i),he(!1),I=!0)}if(J){for(var f=null,$,w=0;w<g;w++){if(ce.nodeType===Xe&&ce.data===Ke){i=ce,I=!0,he(!1);break}var E=b[w],N=s(E,w);$=Se(ce,d,f,null,E,N,w,r,t,e),d.items.set(N,$),f=$}g>0&&_e(Pe())}if(J)g===0&&o&&(u=ke(()=>o(i)));else if(Ze()){var D=new Set,k=ie;for(w=0;w<g;w+=1){E=b[w],N=s(E,w);var S=d.items.get(N)??y.get(N);S?Fe(S,E,w):($=Se(null,d,null,null,E,N,w,r,t,e,!0),y.set(N,$)),D.add(N)}for(const[M,C]of d.items)D.has(M)||k.skipped_effects.add(C.e);k.add_callback(h)}else h();I&&he(!0),l(p)}),J&&(i=ce)}function Tt(a,t,e,s,r,o,i,d,m){var u=t.length,_=e.items,y=e.first,p=y,b,n=null,h=[],g=[],I,O,f,$;for($=0;$<u;$+=1){if(I=t[$],O=d(I,$),f=_.get(O),f===void 0){var w=s.get(O);if(w!==void 0){s.delete(O),_.set(O,w);var E=n?n.next:p;W(e,n,w),W(e,w,E),ye(w,E,r),n=w}else{var N=p?p.e.nodes_start:r;n=Se(N,e,n,n===null?e.first:n.next,I,O,$,o,i,m)}_.set(O,n),h=[],g=[],p=n.next;continue}if(Fe(f,I,$),(f.e.f&be)!==0&&Ce(f.e),f!==p){if(b!==void 0&&b.has(f)){if(h.length<g.length){var D=g[0],k;n=D.prev;var S=h[0],M=h[h.length-1];for(k=0;k<h.length;k+=1)ye(h[k],D,r);for(k=0;k<g.length;k+=1)b.delete(g[k]);W(e,S.prev,M.next),W(e,n,S),W(e,M,D),p=D,n=M,$-=1,h=[],g=[]}else b.delete(f),ye(f,p,r),W(e,f.prev,f.next),W(e,f,n===null?e.first:n.next),W(e,n,f),n=f;continue}for(h=[],g=[];p!==null&&p.k!==O;)(p.e.f&be)===0&&(b??(b=new Set)).add(p),g.push(p),p=p.next;if(p===null)continue;f=p}h.push(f),n=f,p=f.next}if(p!==null||b!==void 0){for(var C=b===void 0?[]:Me(b);p!==null;)(p.e.f&be)===0&&C.push(p),p=p.next;var K=C.length;if(K>0){var Z=u===0?r:null;$t(e,C,Z)}}a.first=e.first&&e.first.e,a.last=n&&n.e;for(var ue of s.values())Le(ue.e);s.clear()}function Fe(a,t,e,s){tt(a.v,t),a.i=e}function Se(a,t,e,s,r,o,i,d,m,u,_){var y=(m&st)!==0,p=(m&lt)===0,b=y?p?et(r,!1,!1):Oe(r):r,n=(m&rt)===0?i:Oe(i),h={i:n,v:b,k:o,a:null,e:null,prev:e,next:s};try{if(a===null){var g=document.createDocumentFragment();g.append(a=Re())}return h.e=ke(()=>d(a,b,n,u),J),h.e.prev=e&&e.e,h.e.next=s&&s.e,e===null?_||(t.first=h):(e.next=h,e.e.next=h.e),s!==null&&(s.prev=h,s.e.prev=h.e),h}finally{}}function ye(a,t,e){for(var s=a.next?a.next.e.nodes_start:e,r=t?t.e.nodes_start:e,o=a.e.nodes_start;o!==null&&o!==s;){var i=it(o);r.before(o),o=i}}function W(a,t,e){t===null?a.first=e:(t.next=e,t.e.next=e&&e.e),e!==null&&(e.prev=t,e.e.prev=t&&t.e)}const Ae=[...` 	
\r\f¬†\v\uFEFF`];function jt(a,t,e){var s=a==null?"":""+a;if(t&&(s=s?s+" "+t:t),e){for(var r in e)if(e[r])s=s?s+" "+r:r;else if(s.length)for(var o=r.length,i=0;(i=s.indexOf(r,i))>=0;){var d=i+o;(i===0||Ae.includes(s[i-1]))&&(d===s.length||Ae.includes(s[d]))?s=(i===0?"":s.substring(0,i))+s.substring(d+1):i=d}}return s===""?null:s}function V(a,t,e,s,r,o){var i=a.__className;if(J||i!==e||i===void 0){var d=jt(e,s,o);(!J||d!==a.getAttribute("class"))&&(d==null?a.removeAttribute("class"):a.className=d),a.__className=e}else if(o&&r!==o)for(var m in o){var u=!!o[m];(r==null||u!==!!r[m])&&a.classList.toggle(m,u)}return o}const It=Symbol("is custom element"),Pt=Symbol("is html");function ae(a){if(J){var t=!1,e=()=>{if(!t){if(t=!0,a.hasAttribute("value")){var s=a.value;fe(a,"value",null),a.value=s}if(a.hasAttribute("checked")){var r=a.checked;fe(a,"checked",null),a.checked=r}}};a.__on_r=e,vt(e),dt()}}function Ne(a,t){var e=Ge(a);e.value===(e.value=t??void 0)||a.value===t&&(t!==0||a.nodeName!=="PROGRESS")||(a.value=t??"")}function fe(a,t,e,s){var r=Ge(a);J&&(r[t]=a.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&a.nodeName==="LINK")||r[t]!==(r[t]=e)&&(t==="loading"&&(a[pt]=e),e==null?a.removeAttribute(t):typeof e!="string"&&Ot(a).includes(t)?a[t]=e:a.setAttribute(t,e))}function Ge(a){return a.__attributes??(a.__attributes={[It]:a.nodeName.includes("-"),[Pt]:a.namespaceURI===ft})}var Ee=new Map;function Ot(a){var t=Ee.get(a.nodeName);if(t)return t;Ee.set(a.nodeName,t=[]);for(var e,s=a,r=Element.prototype;r!==s;){e=gt(s);for(var o in e)e[o].set&&t.push(o);s=mt(s)}return t}function Y(a,t,e=t){var s=_t(),r=new WeakSet;ht(a,"input",o=>{var i=o?a.defaultValue:a.value;if(i=xe(a)?we(i):i,e(i),ie!==null&&r.add(ie),s&&i!==(i=t())){var d=a.selectionStart,m=a.selectionEnd;a.value=i??"",m!==null&&(a.selectionStart=d,a.selectionEnd=Math.min(m,a.value.length))}}),(J&&a.defaultValue!==a.value||ve(t)==null&&a.value)&&(e(xe(a)?we(a.value):a.value),ie!==null&&r.add(ie)),bt(()=>{var o=t();if(a===document.activeElement){var i=yt??ie;if(r.has(i))return}xe(a)&&o===we(a.value)||a.type==="date"&&!o&&!a.value||o!==a.value&&(a.value=o??"")})}function xe(a){var t=a.type;return t==="number"||t==="range"}function we(a){return a===""?null:+a}const le=35672,At=async a=>{console.log("callLLM",a);try{const t=await fetch(`http://localhost:${le}/api/roby`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(t.ok){let e=await t.json();console.log(e),P.update(s=>({...s,output:e.result}))}else console.error(t),P.update(e=>({...e,error:"API request failed"}))}catch(t){console.error(t),P.update(e=>({...e,error:t.message}))}},Nt=async a=>{try{const t=await fetch(`http://localhost:${le}/api/image`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:a})});if(t.ok){let e=await t.json();console.log(e),P.update(s=>({...s,output:"data:image/png;base64,"+e.result.b64}))}else console.error(t),P.update(e=>({...e,error:"API request failed"}))}catch(t){console.error(t),P.update(e=>({...e,error:t.message}))}},Et=async a=>{try{const t=await fetch(`http://localhost:${le}/api/rembg`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(t.ok){let e=await t.json();console.log(e),P.update(s=>({...s,output:"data:image/png;base64,"+e.result}))}}catch(t){console.error(t),P.update(e=>({...e,error:t.message}))}},Je=async()=>{try{const a=await fetch(`http://localhost:${le}/api/pokemon`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(a.ok){let t=await a.json();console.log(t),P.update(e=>({...e,output:{msg:t.result.msg,image:t.result.image}}))}}catch(a){console.error(a),P.update(t=>({...t,error:a.message}))}},Rt=async a=>{try{const t=await fetch(`http://localhost:${le}/api/haiku`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({about:a})});if(t.ok){let e=await t.json();console.log(e),P.update(s=>({...s,output:e.result}))}}catch(t){console.error(t),P.update(e=>({...e,error:t.message}))}},Q=async()=>{const a=await fetch(`http://localhost:${le}/api/settings_get`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});return a.ok?(await a.json()).result:(console.error(a),null)},pe=async a=>{const e={...await Q(),...a},s=await fetch(`http://localhost:${le}/api/settings_update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return s.ok?(await s.json()).result:(console.error(s),null)},Dt=(a,t,e,s)=>{a.preventDefault(),t(),e()=="generic-prompt"?At(s().input):e()=="image-generation"?Nt(s().input.prompt):e()=="background-removal"?Et(s().input):e()=="pokemon"?Je(s().input):e()=="haiku"&&Rt(s().input)};var Mt=A('<div class="w-full"><button> </button></div>');function Ct(a,t){B(t,!0);const[e,s]=se(),r=()=>re(P,"$status",e);let o=Be(t,"name",3,"Mid button"),i=Te(()=>r().input==null);const d=()=>{P.update(p=>({...p,output:null,loading:!0}))};var m=Mt(),u=v(m);let _;u.__click=[Dt,d,o,r];var y=v(u,!0);c(u),c(m),H(p=>{_=V(u,1,`w-full px-4 py-2 rounded-full ${l(i)&&!r().loading?"opacity-50":""} disabled:cursor-not-allowed transition-all duration-200 relative overflow-hidden text-black`,null,_,p),u.disabled=l(i)||r().loading,q(y,o())},[()=>({"cursor-not-allowed":l(i)||r().loading,"bg-oio-cyan":!r().loading,"animate-gradient":r().loading,"bg-gradient-to-r":r().loading,"from-oio-cyan":r().loading,"via-white":r().loading,"to-oio-cyan":r().loading,"bg-[length:200%_100%]":r().loading})]),j(a,m),F(),s()}z(["click"]);var Lt=(a,t)=>T(t,!l(t)),Ht=A('<div class="pb-4"><label for="system-prompt">System Prompt</label> <input type="text"/></div>'),Bt=A('<div class="input-output-slot svelte-1tcjj8y"><h4 class="input-title">Generic Prompt</h4> <form><input type="text" placeholder="Write a poem"/> <div><h5 class="text-xs text-gray-ultralight">Advanced Settings <button class="text-xs text-oio-cyan pt-2 pb-1"> </button></h5> <!></div></form></div>');function Ft(a,t){B(t,!0);let e=R("Write a poem"),s=R(""),r=R(!1);te(()=>{l(e)==""?(P.update(n=>({...n,input:null})),console.log("input is null")):P.update(n=>({...n,input:{prompt:l(e),system_prompt:l(s)}}))}),ne(async()=>{let n=await Q();T(s,n.system_prompt||"",!0)});var o=Bt(),i=x(v(o),2),d=v(i);ae(d);var m=x(d,2),u=v(m),_=x(v(u));_.__click=[Lt,r];var y=v(_,!0);c(_),c(u);var p=x(u,2);{var b=n=>{var h=Ht(),g=x(v(h),2);ae(g),c(h),Y(g,()=>l(s),I=>T(s,I)),G(3,h,()=>X),j(n,h)};L(p,n=>{l(r)&&n(b)})}c(m),c(i),c(o),H(()=>q(y,l(r)?"Hide":"Show")),Y(d,()=>l(e),n=>T(e,n)),j(a,o),F()}z(["click"]);var Gt=(a,t)=>T(t,!l(t)),Jt=A('<div class="pb-4"><label for="style-prompt">Style Prompt</label> <input type="text"/></div>'),qt=A('<div class="input-output-slot svelte-zf21om"><h4 class="input-title">Image Generation</h4> <form><input type="text" placeholder="A frog with a magician hat"/> <div><h5 class="text-xs text-gray-ultralight">Advanced Settings <button class="text-xs text-oio-cyan pt-2 pb-1"> </button></h5> <!></div></form></div>');function Ut(a,t){B(t,!0);let e=R("a frog with a blue wizard hat with stars"),s=R(""),r=R(!1);te(()=>{l(e)==""?(P.update(n=>({...n,input:null})),console.log("input is null")):P.update(n=>({...n,input:{prompt:l(e)+(l(s)?" "+l(s):"")}}))}),ne(async()=>{let n=await Q();T(s,n.style_prompt||"",!0)});var o=qt(),i=x(v(o),2),d=v(i);ae(d);var m=x(d,2),u=v(m),_=x(v(u));_.__click=[Gt,r];var y=v(_,!0);c(_),c(u);var p=x(u,2);{var b=n=>{var h=Jt(),g=x(v(h),2);ae(g),c(h),Y(g,()=>l(s),I=>T(s,I)),G(3,h,()=>X),j(n,h)};L(p,n=>{l(r)&&n(b)})}c(m),c(i),c(o),H(()=>q(y,l(r)?"Hide":"Show")),Y(d,()=>l(e),n=>T(e,n)),j(a,o),F()}z(["click"]);const Vt=(a,t)=>{const e=Array.from(a.target.files);e.length>0&&t([e[0]])},Wt=(a,t,e)=>{T(t,null),l(e)&&(l(e).value="")},Yt=(a,t)=>{var e;(e=l(t))==null||e.click()};var zt=a=>a.stopPropagation(),Xt=A('<div class="mb-4"><div class="text-sm font-medium mb-2">Uploaded file:</div> <div class="flex items-center justify-between bg-gray-100 p-2 rounded"><span class="text-sm truncate"> </span> <button type="button" class="text-red-500 hover:text-red-700 ml-2">√ó</button></div></div>'),Kt=A('<div class="input-background-removal"><h4 class="input-title">Background Removal</h4> <form class="relative"><div class="mb-4 relative"><div><div class="text-gray-500"><div class="mb-2">üìÅ</div> <div class="mb-2"><span class="font-medium">Drag an image or</span> <span class="text-blue-500 underline cursor-pointer">upload it</span></div> <div class="text-sm">PNG or JPEG only</div> <input type="url" placeholder="paste a url"/></div></div> <input type="file" accept=".png,.jpg,.jpeg,image/png,image/jpeg" class="hidden"/></div> <!></form></div>');function Zt(a,t){B(t,!0);const[e,s]=se(),r=()=>re(P,"$status",e);let o=R("https://static1.cbrimages.com/wordpress/wp-content/uploads/2022/11/Pokemon-Ditto.jpg"),i=R(null),d=Te(()=>l(o).length===0&&!l(_)||r().input&&!r().output),m=R(!1),u=R(null),_=R(null);te(()=>{(l(o)||l(i))&&He(P,ve(r).input={image_url:l(o)?l(o):l(i),is_b64:!!l(i)},ve(r))});const y=k=>{k.preventDefault(),T(m,!0)},p=k=>{k.preventDefault(),T(m,!1)},b=k=>{k.preventDefault(),T(m,!1);const S=Array.from(k.dataTransfer.files);S.length>0&&n([S[0]])},n=k=>{const S=k.filter(M=>M.type==="image/png"||M.type==="image/jpeg"||M.type==="image/jpg");S.length>0&&(T(_,S[0],!0),T(o,""))},h=async k=>new Promise((S,M)=>{const C=new FileReader;C.onload=()=>S(C.result),C.onerror=M,C.readAsDataURL(k)});var g=Kt(),I=x(v(g),2),O=v(I),f=v(O);f.__click=[Yt,u];var $=v(f),w=x(v($),6);ae(w),w.__click=[zt],c($),c(f);var E=x(f,2);E.__change=[Vt,n],wt(E,k=>T(u,k),()=>l(u)),c(O);var N=x(O,2);{var D=k=>{var S=Xt(),M=x(v(S),2),C=v(M),K=v(C,!0);c(C);var Z=x(C,2);Z.__click=[Wt,_,u],c(M),c(S),H(()=>q(K,l(_).name)),j(k,S)};L(N,k=>{l(_)&&k(D)})}c(I),c(g),H(()=>{V(f,1,`border-2 border-dashed border-gray-300 rounded-lg p-8 text-center transition-colors duration-200 cursor-pointer hover:border-gray-400 ${l(m)?"border-blue-400 ":""} ${l(d)?"bg-gray-dark":""}`),V(w,1,`w-full p-2 border border-gray-300 rounded my-2 ${l(d)?"bg-gray-dark":"bg-white"}`),w.disabled=l(d)}),oe("submit",I,async k=>{k.preventDefault();let S=null;l(_)&&(S=await h(l(_)),T(i,S.split(",")[1],!0)),handleSubmit({image_url:l(o)?l(o):l(i),is_b64:!!l(i)})}),oe("dragover",f,y),oe("dragleave",f,p),oe("drop",f,b),Y(w,()=>l(o),k=>T(o,k)),G(3,g,()=>X),j(a,g),F(),s()}z(["click","change"]);var Qt=A('<div class="input-haiku"><h4 class="input-title">Topic</h4> <input type="text" placeholder="The sand"/></div>');function ea(a,t){B(t,!0);const[e,s]=se(),r=()=>re(P,"$status",e);let o=R("The sand");te(()=>{l(o)&&He(P,ve(r).input=l(o),ve(r))});var i=Qt(),d=x(v(i),2);ae(d),c(i),Y(d,()=>l(o),m=>T(o,m)),G(3,i,()=>X),j(a,i),F(),s()}function ta(a,t){B(t,!1),ne(async()=>{Je(),P.update(e=>({...e,input:"pokemon"}))}),Ie(),F()}var aa=A('<div class="w-full"><div><!></div> <!> <div class="w-full"></div></div>');function ra(a,t){B(t,!1);const[e,s]=se(),r=()=>re(P,"$status",e);Ie();var o=aa(),i=v(o),d=v(i);{var m=y=>{Ft(y,{})},u=y=>{var p=ee(),b=U(p);{var n=g=>{Ut(g,{})},h=g=>{var I=ee(),O=U(I);{var f=w=>{Zt(w,{})},$=w=>{var E=ee(),N=U(E);{var D=S=>{ea(S,{})},k=S=>{var M=ee(),C=U(M);{var K=Z=>{ta(Z,{})};L(C,Z=>{r().modality=="pokemon"&&Z(K)},!0)}j(S,M)};L(N,S=>{r().modality=="haiku"?S(D):S(k,!1)},!0)}j(w,E)};L(O,w=>{r().modality=="background-removal"?w(f):w($,!1)},!0)}j(g,I)};L(b,g=>{r().modality=="image-generation"?g(n):g(h,!1)},!0)}j(y,p)};L(d,y=>{r().modality=="generic-prompt"?y(m):y(u,!1)})}c(i);var _=x(i,2);{let y=De(()=>r().modality||"generate");Ct(_,{get name(){return l(y)}})}je(2),c(o),H(()=>V(i,1,`${r().modality!="pokemon"?"input-output w-full mb-4":""}  `)),G(3,o,()=>X),j(a,o),F(),s()}const sa=(a,t,e)=>{navigator.clipboard.writeText(t.text),T(e,!0),setTimeout(()=>{T(e,!1)},1e3)};var la=A('<div><div class="bg-gray-light p-2 rounded-lg min-h-20 max-h-40 overflow-y-scroll svelte-6l9m1x"><p class="text-sm svelte-6l9m1x"> </p></div> <button class="absolute bottom-2 right-2 bg-gray-light text-white p-1 aspect-square rounded-full disabled:cursor-not-allowed svelte-6l9m1x"><img src="/assets/copy.svg" alt="copy" class="w-4 h-4 svelte-6l9m1x"/></button></div>');function ia(a,t){let e=R(!1);var s=la(),r=v(s),o=v(r),i=v(o,!0);c(o),c(r);var d=x(r,2);d.__click=[sa,t,e],c(s),H(()=>{V(s,1,`relative w-full ${l(e)?"animation-glow":""}`,"svelte-6l9m1x"),q(i,t.text)}),G(3,s,()=>X),j(a,s)}z(["click"]);var oa=A('<div><div class="h-fit max-h-96 svelte-1mg75xr"><img alt="generation" class="w-full h-full object-cover rounded-xl svelte-1mg75xr"/></div> <button class="absolute bottom-2 right-2 bg-gray-light text-white p-1 aspect-square rounded-full disabled:cursor-not-allowed svelte-1mg75xr"><img src="/assets/download.svg" alt="download" class="w-4 h-4 svelte-1mg75xr"/></button></div>');function na(a,t){const e=()=>{const d=document.createElement("a");d.href=t.image,d.download="image.png",d.click()};var s=oa();V(s,1,"relative w-full  svelte-1mg75xr");var r=v(s),o=v(r);c(r);var i=x(r,2);i.__click=e,c(s),H(()=>fe(o,"src",t.image)),G(3,s,()=>X),j(a,s)}z(["click"]);var ua=A('<div class="output-pokemon flex flex-col items-center justify-center"><div><p> </p></div> <div><img alt="pokemon"/></div></div>');function ca(a,t){B(t,!0);var e=ua(),s=v(e),r=v(s),o=v(r,!0);c(r),c(s);var i=x(s,2),d=v(i);c(i),c(e),H(()=>{q(o,t.output.msg),fe(d,"src",t.output.image)}),j(a,e),F()}var va=A('<div class="input-output"><h5 class="text-sm font-monosten mb-2">Result</h5> <!></div>');function da(a,t){B(t,!0);const[e,s]=se(),r=()=>re(P,"$status",e);let o=Be(t,"visible",3,!1);te(()=>{r().output&&r().loading&&P.update(u=>({...u,loading:!1}))});var i=ee(),d=U(i);{var m=u=>{var _=va(),y=x(v(_),2);{var p=n=>{ia(n,{get text(){return r().output}})},b=n=>{var h=ee(),g=U(h);{var I=f=>{na(f,{get image(){return r().output}})},O=f=>{var $=ee(),w=U($);{var E=N=>{ca(N,{get output(){return r().output}})};L(w,N=>{r().modality=="pokemon"&&N(E)},!0)}j(f,$)};L(g,f=>{r().modality=="image-generation"||r().modality=="background-removal"?f(I):f(O,!1)},!0)}j(n,h)};L(y,n=>{r().modality=="generic-prompt"||r().modality=="haiku"?n(p):n(b,!1)})}c(_),G(3,_,()=>X),j(u,_)};L(d,u=>{o()&&u(m)})}j(a,i),F(),s()}var fa=(a,t,e)=>t(l(e).name),pa=A('<div class="w-full p-1"><button class="w-full bg-gray-light hover:bg-gray-light/80 rounded-lg p-2 py-4 flex flex-col items-start justify-start transition-colors duration-300"><div><div class="text-left uppercase text-oio-cyan"><p class="flex items-center gap-2"> </p></div> <div class="w-full text-left"><p class="text-xs text-gray-ultralight"> </p></div></div></button></div>'),ma=(a,t,e)=>t(l(e).name),ga=A('<div class="w-1/2 p-1"><button class="w-full aspect-square bg-black hover:bg-[#0d0d0d] rounded-lg p-2 flex flex-col items-start justify-start transition-colors duration-300"><div><div class="text-left uppercase text-oio-cyan"><p class="flex items-center gap-2"> </p></div> <div class="w-full text-left"><p class="text-xs text-gray-ultralight"> </p></div></div></button></div>'),_a=A('<div class="w-full flex flex-wrap items-start justify-start"></div>');function ha(a,t){B(t,!1);const e=[{name:"generic-prompt",label:"Generic Prompt",emoji:"üí≠",description:"All purpose text-based command",full:!0},{name:"image-generation",label:"Image Generation",emoji:"üé®",description:"I generate an image from text description",full:!1},{name:"background-removal",label:"Background Removal",emoji:"‚úÇÔ∏è",description:"I remove the background of a given image",full:!1},{name:"pokemon",label:"Pokemon",emoji:"üêâ",description:"...A wild Roby appeared!",full:!1},{name:"haiku",label:"Haiku",emoji:"üå∏",description:"I write a haiku about a subject of your choice",full:!1}],s=o=>{P.update(i=>({...i,modality:o}))};Ie();var r=_a();St(r,5,()=>e,kt,(o,i)=>{var d=ee(),m=U(d);{var u=y=>{var p=pa(),b=v(p);b.__click=[fa,s,i];var n=v(b),h=v(n),g=v(h),I=v(g);c(g),c(h);var O=x(h,2),f=v(O),$=v(f,!0);c(f),c(O),c(n),c(b),c(p),H(()=>{q(I,`${l(i).emoji??""} ${l(i).label??""}`),q($,l(i).description)}),j(y,p)},_=y=>{var p=ga(),b=v(p);b.__click=[ma,s,i];var n=v(b),h=v(n),g=v(h),I=v(g);c(g),c(h);var O=x(h,2),f=v(O),$=v(f,!0);c(f),c(O),c(n),c(b),c(p),H(()=>{q(I,`${l(i).emoji??""} ${l(i).label??""}`),q($,l(i).description)}),j(y,p)};L(m,y=>{l(i).full?y(u):y(_,!1)})}j(o,d)}),c(r),G(3,r,()=>X),j(a,r),F()}z(["click"]);var ba=(a,t)=>t(null),ya=A("<!> <!>",1),xa=A('<div class="w-full max-w-sm flex flex-col"><div><button class="bg-gray-light rounded-full p-2 border-oio-cyan border-2 disabled:bg-transparent disabled:border-none"><img src="/assets/home.svg" alt="home" class="w-4 h-4"/></button></div> <div><!></div></div>');function wa(a,t){B(t,!0);const[e,s]=se(),r=()=>re(P,"$status",e),o=b=>{P.update(n=>({...n,output:null,modality:b}))};var i=xa(),d=v(i),m=v(d);m.__click=[ba,o],c(d);var u=x(d,2),_=v(u);{var y=b=>{ha(b,{})},p=b=>{var n=ya(),h=U(n);ra(h,{});var g=x(h,2);da(g,{get visible(){return r().output}}),j(b,n)};L(_,b=>{r().modality==null?b(y):b(p,!1)})}c(u),c(i),H(()=>{V(d,1,`w-full flex items-center justify-center h-12 min-h-12 ${r().modality==null?"rounded-t-xl bg-gray-dark":""}`),m.disabled=r().modality==null,V(u,1,`w-full flex flex-col items-center justify-center gap-4 p-6 rounded-xl bg-gray-dark ${r().modality?"border-2 border-oio-cyan":"rounded-t-none"} transition-all duration-300`)}),G(1,i,()=>$e,()=>({duration:300,delay:300})),G(2,i,()=>$e,()=>({duration:200})),j(a,i),F(),s()}z(["click"]);var ka=A('<div><p class="text-xs text-gray-light flex items-center gap-1"><img src="/assets/info.svg" alt="info" class="w-3 h-3"/> </p></div>');function me(a,t){var e=ka(),s=v(e),r=x(v(s));c(s),c(e),H(()=>q(r,` ${t.text??""}`)),j(a,e)}var $a=(a,t)=>{a.target===a.currentTarget&&T(t,!1)},Sa=(a,t)=>{a.stopPropagation(),T(t,!l(t))},Ta=A('<div class="w-full"><div class="settings-field flex gap-2 items-center justify-between"><label for="name" class="settings-label w-1/3 svelte-1hl2cnr">Refers to you as</label> <input type="text" class="w-2/3"/></div> <div class="settings-field"><label for="system-prompt" class="settings-label svelte-1hl2cnr">Conversational behavior</label> <textarea type="text" class="h-24"></textarea> <!></div> <div class="settings-field"><label for="image-style" class="settings-label svelte-1hl2cnr">Visual creativity</label> <textarea type="text" class="h-14"></textarea> <!></div> <div class="w-full h-1 border-b border-gray-ultralight"></div> <div class="settings-field w-full flex justify-center items-center"><button class="bg-black rounded-full p-2 text-red-500 text-xs">Restore default settings</button></div></div>'),ja=A('<div><div><button class="flex items-center gap-4">Settings <span class="w-6 h-6 flex items-center justify-center bg-gray-light rounded-full"><img src="/assets/menu-toggle.svg" alt="settings"/></span></button> <!></div></div>');function Ia(a,t){B(t,!0);let e=R(!1),s=R(!0),r=R(!1),o=R(""),i=R(""),d=R(""),m=R(null);te(()=>{l(s)&&l(r)&&T(s,!1)}),te(async()=>{l(r)&&!l(s)&&(await xt(),T(m,await Q(),!0),console.log({settings:l(m)}),T(o,l(m).name||"",!0),T(i,l(m).system_prompt||"",!0),T(d,l(m).style_prompt||"",!0)),l(e)&&l(r)&&l(m)&&!l(s)&&(l(o)!==(l(m).name||"")||l(i)!==(l(m).system_prompt||"")||l(d)!==(l(m).style_prompt||""))&&await pe({name:l(o),system_prompt:l(i),style_prompt:l(d)})}),ne(async()=>{T(e,!0)});var u=ja();u.__click=[$a,r];var _=v(u),y=v(_);y.__click=[Sa,r];var p=x(v(y)),b=v(p);c(p),c(y);var n=x(y,2);{var h=g=>{var I=Ta(),O=v(I),f=x(v(O),2);ae(f),c(O);var $=x(O,2),w=x(v($),2);de(w);var E=x(w,2);me(E,{text:"Defines how Roby will reply"}),c($);var N=x($,2),D=x(v(N),2);de(D);var k=x(D,2);me(k,{text:"Defines how Roby will generate images"}),c(N),je(4),c(I),Y(f,()=>l(o),S=>T(o,S)),Y(w,()=>l(i),S=>T(i,S)),Y(D,()=>l(d),S=>T(d,S)),G(3,I,()=>X),j(g,I)};L(n,g=>{l(r)&&g(h)})}c(_),c(u),H(()=>{V(u,1,`w-screen h-screen fixed top-0 left-0 z-50 ${l(r)?"pointer-events-auto":"pointer-events-none"}`),V(_,1,`settings-container ${l(r)?"open":""} fixed top-4 right-4 z-50 flex flex-col items-end gap-2 bg-gray-dark rounded-lg p-4 pointer-events-auto`,"svelte-1hl2cnr"),V(b,1,`w-4 h-4 ${l(r)?"rotate-180":""} transition-all duration-400`)}),j(a,u),F()}z(["click"]);const Pa=async(a,t)=>{T(t,l(t)-1)},Oa=async(a,t)=>{T(t,l(t)+1),l(t)==2&&(await pe({first_time:!1}),P.update(e=>({...e,firstTime:!1})))};var Aa=A('<div class="w-full mb-2 flex flex-col gap-1"><p class="text-sm mb-1">I‚Äôm Roby, your new creative buddy!<br/>Wanna be friends?</p> <form><input type="text" placeholder="Your name, or nickname, or whatever‚Ä¶" class="w-full bg-gray-light rounded-xl p-2"/></form> <p class="text-xs text-gray-light">You can change it later</p></div>'),Na=A('<div class="w-full"><button class="text-sm bg-gray-light rounded-full p-2"><img src="/assets/arrow.svg" alt="arrow" class="w-3 h-3 rotate-180"/></button></div>'),Ea=A('<!> <div class="w-full"><form><div class="settings-field"><label for="system-prompt">System Prompt</label> <textarea type="text" class="h-24"></textarea> <!></div> <div class="settings-field"><label for="image-style">Image Style</label> <textarea type="text"></textarea> <!></div></form></div>',1),Ra=A('<div class="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[90vw] max-w-sm bg-gray-dark rounded-xl p-4 flex flex-col items-center justify-center"><div class="w-full h-4 flex items-center justify-center mb-4"><img src="/assets/intro.svg" alt="intro" class="h-full"/></div> <div class="w-full"><!></div> <div class="w-full flex items-center justify-center my-2"><button class="w-1/2 bg-oio-cyan text-black px-4 py-2 text-sm rounded-full disabled:opacity-50 disabled:cursor-not-allowed">next</button></div> <div><button class="text-sm text-gray-ultralight">skip</button></div></div>');function Da(a,t){B(t,!0);let e=R(0),s=R(""),r=R(""),o=R(""),i=Te(()=>!(l(e)==0&&l(s).length>0||l(e)==1&&l(r).length>0||l(o).length>0));const d=async()=>{await pe({name:l(s)});const f=await Q();console.log(3,f)},m=async()=>{const f={system_prompt:l(r),style_prompt:l(o),first_time:!1};await pe(f),P.update($=>({...$,firstTime:!1}))},u=async()=>{l(e)===0?d():l(e)===1&&m(),T(e,l(e)+1)};ne(async()=>{const f=await Q();T(r,f.system_prompt,!0),T(o,f.style_prompt,!0)});var _=Ra(),y=x(v(_),2),p=v(y);{var b=f=>{var $=Aa(),w=x(v($),2),E=v(w);ae(E),c(w),je(2),c($),oe("submit",w,u),Y(E,()=>l(s),N=>T(s,N)),j(f,$)},n=f=>{var $=Ea(),w=U($);{var E=ue=>{var ge=Na(),qe=v(ge);qe.__click=[Pa,e],c(ge),j(ue,ge)};L(w,ue=>{l(e)>0&&ue(E)})}var N=x(w,2),D=v(N),k=v(D),S=x(v(k),2);de(S);var M=x(S,2);me(M,{text:"Defines how Roby will handle textual conversation"}),c(k);var C=x(k,2),K=x(v(C),2);de(K);var Z=x(K,2);me(Z,{text:"Defines how Roby will generate images"}),c(C),c(D),c(N),H(()=>{Ne(S,l(r)),Ne(K,l(o))}),oe("submit",D,u),j(f,$)};L(p,f=>{l(e)===0?f(b):f(n,!1)})}c(y);var h=x(y,2),g=v(h);g.__click=u,c(h);var I=x(h,2),O=v(I);O.__click=[Oa,e],c(I),c(_),H(()=>g.disabled=l(i)),G(3,_,()=>$e,()=>({duration:200})),j(a,_),F()}z(["click"]);var Ma=A("<!> <!>",1),Ca=A('<section class="w-full flex items-center justify-center"><!></section>');function Ua(a,t){B(t,!0);const[e,s]=se(),r=()=>re(P,"$status",e);te(async()=>{if(r().firstTime){const u=await Q();console.log(1,u)}else{const u=await Q();console.log(2,u)}}),ne(async()=>{const u=await Q();P.update(_=>({..._,firstTime:!!u.first_time}))});var o=Ca(),i=v(o);{var d=u=>{Da(u,{})},m=u=>{var _=Ma(),y=U(_);wa(y,{});var p=x(y,2);Ia(p,{}),j(u,_)};L(i,u=>{r().firstTime?u(d):u(m,!1)})}c(o),j(a,o),F(),s()}export{Ua as component};
